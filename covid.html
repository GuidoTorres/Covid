<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Covid 19 - Tracker </title>
    <!-- Custom fonts for this template-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/js/all.min.js"
        integrity="sha256-KzZiKy0DWYsnwMF+X1DvQngQ2/FxF7MF3Ff72XcpuPs=" crossorigin="anonymous"></script>
    <link
        href="https://fonts.googleapis.com/css?family=Nunito:200,200i,300,300i,400,400i,600,600i,700,700i,800,800i,900,900i"
        rel="stylesheet">
    <!-- DATATABLE -->
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.21/css/jquery.dataTables.min.css">
    <link rel="stylesheet" href="https://cdn.datatables.net/responsive/2.2.4/css/responsive.dataTables.min.css">

    <!-- CSS-->
    <link href="covid.css" rel="stylesheet">

</head>

<body id="page-top">

    <!-- Page Wrapper -->
    <div id="wrapper">
        <!-- Content Wrapper -->
        <div id="content-wrapper" class="d-flex flex-column">

            <!-- Main Content -->
            <div id="content">

                <!-- Topbar -->
                <nav class="navbar navbar-expand navbar-light bg-white topbar mb-4 static-top shadow"
                    style="height: 60px;">

                    <h1 style="color: black; font-weight: 600;">Covid 19 LIVE</h4>
                        <ul class="navegar">
                            <!-- <li> <a href="">Calculadora</a> </li> -->
                            <li id="li1"><a id="a1" href="covid.html">Inicio</a></li>
                            <li id="li1"> <a id="a2" href="mapa.html">Mapa</a> </li>
                        </ul>


                </nav>
                <!-- End of Topbar -->
                <!-- Begin Page Content -->
                <div class="container-fluid">

                    <div class="row">

                        <!-- CARD1 -->
                        <div class="col">
                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card border-left-danger shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2" id="total">
                                                <div class="text-xl font-weight-bold text-danger text-uppercase mb-1"
                                                    id="total">Total Cases</div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CARD2 -->
                        <div class="col">

                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card border-left-success shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xl font-weight-bold text-success text-uppercase mb-1"
                                                    id="recovered">Recovered </div>

                                            </div>
                                            <div class="col-auto">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CARD3 -->
                        <div class="col">

                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card border-left-secondary shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xl font-weight-bold text-secondary text-uppercase mb-1"
                                                    id="muertes"> Deaths</div>

                                            </div>
                                            <div class="col-auto">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- CARD4 -->
                        <div class="col">

                            <div class="col-xl-3 col-md-6 mb-4">
                                <div class="card border-left-warning shadow h-100 py-2">
                                    <div class="card-body">
                                        <div class="row no-gutters align-items-center">
                                            <div class="col mr-2">
                                                <div class="text-xl font-weight-bold text-warning text-uppercase mb-1"
                                                    id="activos"> Active</div>

                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                        </div>

                    </div>

                    <!-- Content Row -->

                    <div class="row">

                        <div class="col-12">

                            <div class="container-fluid">


                                <!-- DATATABLE -->
                                <div class="card shadow mb-4">
                                    <div class="card-header py-3">
                                        <h3>WORLD DATA</h1>
                                    </div>

                                    <div class="card-body">
                                        <!-- <div class="table-responsive"> -->
                                        <table class="display responsive nowrap" id="dataTable" style="width: 100%;">
                                            <thead>
                                                <tr>
                                                    <th style="color: black;">COUNTRY</th>
                                                    <th style="color: black;">INFECTED</th>
                                                    <th style="color: black;">TODAY CASES</th>
                                                    <th style="color: black;">DEATHS</th>
                                                    <th style="color: black;">RECOVERED</th>
                                                    <th style="color: black;">CRITICALS</th>
                                                    <th style="color: black;">ACTIVES</th>
                                                </tr>

                                            </thead>
                                            <tbody id="tbody">
                                            </tbody>
                                        </table>
                                        <!-- </div> -->
                                    </div>
                                </div>

                            </div>

                        </div>

                        <!-- /.container-fluid -->

                    </div>
                    <!-- End of Main Content -->


                    <!-- Footer -->
                    <footer class="sticky-footer bg-white">
                        <div class="container my-auto">
                            <div class="copyright text-center my-auto">
                                <span>Copyright &copy; Your Website 2019</span>
                            </div>
                        </div>
                    </footer>
                    <!-- End of Footer -->

                </div>
            </div>
            <!-- End of Content Wrapper -->


        </div>
    </div>
    <!-- End of Page Wrapper -->


    <script src="https://code.jquery.com/jquery-3.4.1.min.js"
        integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.js"></script>
    <script src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
    <script src="https://cdn.datatables.net/responsive/2.2.4/js/dataTables.responsive.min.js"></script>






    <script>

        window.onload = function () {

            getCovid()
            getTabla()
        }

        var tab = document.getElementById('tbody');
        var total = document.getElementById('total')
        var recovered = document.getElementById('recovered')
        var muertes = document.getElementById('muertes')
        var activos = document.getElementById('activos')

        function thousands_separators(num) {
            var num_parts = num.toString().split(".");
            num_parts[0] = num_parts[0].replace(/\B(?=(\d{3})+(?!\d))/g, ",");
            return num_parts.join(".");
        }

        function getCovid() {

            fetch('https://corona.lmao.ninja/v2/all?yesterday')
                .then((response) => {
                    return response.json();
                }).then((objJson) => {

                    if (objJson) {

                        let tot = document.createElement("div")
                        let rec = document.createElement("div")
                        let mue = document.createElement("div")
                        let act = document.createElement("div")

                        tot.innerHTML = `<div class=h5 mb-0 font-weight-bold text-gray-800">${thousands_separators(objJson.cases)}</div>`
                        rec.innerHTML = `<div class=h5 mb-0 font-weight-bold text-gray-800">${thousands_separators(objJson.recovered)}</div>`
                        mue.innerHTML = `<div class=h5 mb-0 font-weight-bold text-red-800">${thousands_separators(objJson.deaths)}</div>`
                        act.innerHTML = `<div class=h5 mb-0 font-weight-bold text-red-800">${thousands_separators(objJson.active)}</div>`


                        total.appendChild(tot)
                        recovered.appendChild(rec)
                        muertes.appendChild(mue)
                        activos.appendChild(act)


                    }
                })
        }

        function getTabla() {

            fetch('https://corona.lmao.ninja/v2/countries?yesterday&sort')
                .then((response) => {
                    return response.json();
                }).then((objTabla) => {

                    console.log(objTabla[0])


                    if (objTabla) {

                        var cantidad = Object.keys(objTabla).length;


                        for (let index = 0; index < cantidad; index++) {


                            let tr = document.createElement("tr")
                            tr.innerHTML = `
                            <td style="color: black;"> <img src=${objTabla[index].countryInfo.flag} width="20" height="15">  ${objTabla[index].country} </td>
                            <td style="color: black;">  ${thousands_separators(objTabla[index].cases)} </td>
                            <td style="color: #E41010;"> + ${thousands_separators(objTabla[index].todayCases)} </td>
                            <td style="color: black;">  ${thousands_separators(objTabla[index].deaths)} </td>
                            <td style="color: black;">  ${thousands_separators(objTabla[index].recovered)} </td>
                            <td style="color: black;">  ${thousands_separators(objTabla[index].critical)} </td>
                            <td style="color: black;">  ${thousands_separators(objTabla[index].active)} </td>
                            `
                            tab.appendChild(tr)

                        }
                        $(document).ready(function () {
                            $('#dataTable').DataTable({

                                rowReorder: true

                            });
                        });
                    }
                })
        }           
    </script>


</body>

</html>